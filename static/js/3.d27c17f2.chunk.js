(this["webpackJsonpreact-lessons-1"]=this["webpackJsonpreact-lessons-1"]||[]).push([[3],{322:function(e,a,t){"use strict";var s=t(0),n=t.n(s),r=t(42),i=t(12),o=function(e){return{isAuth:e.auth.isAuth}};a.a=function(e){return Object(i.b)(o)((function(a){return a.isAuth?n.a.createElement(e,a):n.a.createElement(r.a,{to:"/login"})}))}},324:function(e,a,t){e.exports={dialogs:"Dialogs_dialogs___mZPs",container:"Dialogs_container__2dAyz"}},325:function(e,a,t){e.exports={item:"Dialog_item__1vHkH",dialog:"Dialog_dialog__3T4HM",name:"Dialog_name__34HsH",content:"Dialog_content__2xzGj",active:"Dialog_active__cR9a9"}},326:function(e,a,t){e.exports={items:"DialogsItems_items__2hJI2"}},327:function(e,a,t){e.exports={avatar:"MyMessages_avatar__3ic4G",message:"MyMessages_message__BM5Kx",content:"MyMessages_content__1vG-D",info:"MyMessages_info__2tEH0",date:"MyMessages_date__29XyY",name:"MyMessages_name__oA_u_"}},328:function(e,a,t){e.exports={messages:"Messages_messages__2sP7m"}},329:function(e,a,t){e.exports={avatar:"YourMessages_avatar__3XgZK",message:"YourMessages_message__1ajLv",content:"YourMessages_content__2F9H-",info:"YourMessages_info__8Yz8t",date:"YourMessages_date__3P8Xr",name:"YourMessages_name__1FWbm"}},330:function(e,a,t){e.exports={input:"Input_input__ZhXE-"}},337:function(e,a,t){"use strict";t.r(a);var s=t(35),n=t(36),r=t(38),i=t(37),o=t(39),l=t(0),c=t.n(l),m=t(73),g=t(56),u=t(324),d=t.n(u),_=t(325),p=t.n(_),v=t(19),E=t(30),h=t.n(E),f=function(e){var a=new Date(e);a.setHours(a.getHours()+2);var t=(Date.now()-+a)/36e5;return t<=.01?"a min ago":t<=.1?"a 5 min ago":t<=1.3?"an hour ago":t<=24?"".concat(Math.ceil(t)," hour ago"):t<48?"yesterday":Math.ceil(t)/24<31?"".concat(Math.ceil(t/24)," days ago"):"a long time ago"},M=function(e){var a=e.dialog;return c.a.createElement("div",{className:p.a.item},c.a.createElement(v.b,{to:"/messages/"+a.id,activeClassName:p.a.active},c.a.createElement("div",{className:p.a.dialog},c.a.createElement("div",null,c.a.createElement("img",{src:a.photos.small||h.a,alt:"avatar"})),c.a.createElement("div",{className:p.a.content},c.a.createElement("span",{className:p.a.name},a.userName),c.a.createElement("span",null,f(a.lastDialogActivityDate)),c.a.createElement("p",null,"Online ",f(a.lastUserActivityDate))))))},N=t(326),b=t.n(N),y=function(e){var a=e.dialogs.map((function(e){return console.log(e),c.a.createElement(M,{key:e.id,dialog:e})}));return c.a.createElement("div",{className:b.a.items},a)},I=t(327),D=t.n(I),j=function(e){var a=e.message,t=e.avatar,s=e.login;return c.a.createElement("div",{className:D.a.message},c.a.createElement("div",{className:D.a.content},c.a.createElement("div",{className:D.a.info},c.a.createElement("span",{className:D.a.name},s),c.a.createElement("span",{className:D.a.date},a.date)),c.a.createElement("p",null,a.message)),c.a.createElement("img",{className:D.a.avatar,src:t||h.a,alt:"avatar"}))},O=t(328),x=t.n(O),k=t(329),H=t.n(k),S=function(e){var a=e.message;return c.a.createElement("div",{className:H.a.message},c.a.createElement("img",{className:H.a.avatar,src:"https://img.novosti-n.org/upload/ukraine/131388.jpg",alt:"avatar"}),c.a.createElement("div",{className:H.a.content},c.a.createElement("div",{className:H.a.info},c.a.createElement("span",{className:H.a.name},a.name),c.a.createElement("span",{className:H.a.date},a.date)),c.a.createElement("p",null,a.message)))},Y=t(330),A=t.n(Y),F=t(100),w=t(101),T=t(110),X=t(111),z=Object(X.b)(50),C=Object(w.a)({form:"message"})((function(e){var a=e.handleSubmit;return c.a.createElement("form",{onSubmit:a},c.a.createElement(F.a,{customClassName:"top",component:T.b,validate:[z],placeholder:"Type your message...",name:"messageText"}),c.a.createElement("button",null,"Send"))})),G=function(e){var a=e.addMessage,t=e.userId,s=e.avatar,n=e.login;return c.a.createElement("div",{className:A.a.input},c.a.createElement("img",{src:s||h.a,alt:"avatar"}),c.a.createElement(C,{onSubmit:function(e){t&&n&&a(e.messageText,t,n)}}))},J=function(e){var a=e.messages,t=e.avatar,s=e.addMessage,n=e.userId,r=e.login,i=a.map((function(e){return e.userId==n?c.a.createElement(j,{key:e.id,message:e,avatar:t,login:r}):c.a.createElement(S,{key:e.id,message:e})}));return c.a.createElement("div",null,c.a.createElement("div",{className:x.a.messages},a.length?i:c.a.createElement("h1",null,"Send first message")),c.a.createElement(G,{login:r,avatar:t,userId:n,addMessage:s}))},P=t(112),Z=function(e){var a=e.dialogs,t=Object(g.a)(e,["dialogs"]);return c.a.createElement("div",{className:d.a.dialogs},c.a.createElement(P.a,{placeholder:"Search dialog"}),c.a.createElement("div",{className:d.a.container},c.a.createElement(y,{dialogs:a}),c.a.createElement(J,{messages:t.messages,addMessage:t.addMessage,avatar:t.avatar,login:t.login,userId:t.userId})))},K=t(12),B=t(322),L=t(10),R=t(11),U=t(42),W=t(31),q=function(e){function a(){return Object(s.a)(this,a),Object(r.a)(this,Object(i.a)(a).apply(this,arguments))}return Object(o.a)(a,e),Object(n.a)(a,[{key:"componentDidMount",value:function(){this.props.toggleIsSuccess(!1),this.props.getDialogs(),this.props.match.params.userId&&this.props.getMessages(+this.props.match.params.userId)}},{key:"render",value:function(){var e=this.props,a=e.userId,t=e.login,s=e.avatar,n=e.addMessage,r=e.dialogs,i=e.messages;return!this.props.match.params.userId&&this.props.dialogs.length?c.a.createElement(U.a,{to:"/messages/".concat(this.props.dialogs[0].id)}):this.props.isFetching?c.a.createElement(W.a,null):c.a.createElement(Z,{userId:a,login:t,avatar:s,addMessage:n,dialogs:r,messages:i})}}]),a}(c.a.Component);a.default=Object(L.d)(Object(K.b)((function(e){return{messages:e.dialogs.messages,dialogs:e.dialogs.dialogs,avatar:e.auth.photos.small,login:e.auth.login,userId:e.auth.userId,isFetching:e.app.isFetching}}),{addMessage:m.a,getMessages:m.d,toggleIsSuccess:R.e,getDialogs:m.c}),B.a,U.g)(q)}}]);
//# sourceMappingURL=3.d27c17f2.chunk.js.map