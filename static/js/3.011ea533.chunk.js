(this["webpackJsonpreact-lessons-1"]=this["webpackJsonpreact-lessons-1"]||[]).push([[3],{321:function(e,a,t){e.exports={dialogs:"Dialogs_dialogs__iEN4h",container:"Dialogs_container__1qpD4"}},322:function(e,a,t){e.exports={item:"Dialog_item__17C2k",dialog:"Dialog_dialog__2wMtV",name:"Dialog_name__3hZlG",content:"Dialog_content__297SS",active:"Dialog_active__SsA9O"}},323:function(e,a,t){e.exports={items:"DialogsItems_items__1MA5Y"}},324:function(e,a,t){e.exports={avatar:"MyMessages_avatar__i7zEP",message:"MyMessages_message__3Puh2",content:"MyMessages_content__K6mGl",info:"MyMessages_info__5fUMs",date:"MyMessages_date__2juz5",name:"MyMessages_name__22-vq"}},325:function(e,a,t){e.exports={messages:"Messages_messages__3FSwq"}},326:function(e,a,t){e.exports={avatar:"YourMessages_avatar__2sMDF",message:"YourMessages_message__2FRCv",content:"YourMessages_content__1KaNN",info:"YourMessages_info__194S3",date:"YourMessages_date__M_B-P",name:"YourMessages_name__8T4oH"}},327:function(e,a,t){e.exports={input:"Input_input__Ti6SE"}},334:function(e,a,t){"use strict";t.r(a);var s=t(57),n=t(44),r=t(45),c=t(47),i=t(46),l=t(48),o=t(0),m=t.n(o),g=t(74),u=t(321),d=t.n(u),p=t(322),_=t.n(p),v=t(21),E=t(40),h=t.n(E),f=function(e){return m.a.createElement("div",{className:_.a.item},m.a.createElement(v.b,{to:"/messages/"+e.id,activeClassName:_.a.active},m.a.createElement("div",{className:_.a.dialog},m.a.createElement("div",null,m.a.createElement("img",{src:e.avatar||h.a,alt:"avatar"})),m.a.createElement("div",{className:_.a.content},m.a.createElement("span",{className:_.a.name},e.name),m.a.createElement("span",null,e.date),m.a.createElement("p",null,"Online ",e.userActivityDate)))))},M=t(323),N=t.n(M),b=function(e){var a=new Date(e);a.setHours(a.getHours()+2);var t=(Date.now()-a)/36e5;return t<=.01?"a min ago":t<=.1?"a 5 min ago":t<=1.3?"an hour ago":t<=24?"".concat(Math.ceil(t)," hour ago"):t<48?"yesterday":Math.ceil(t)/24<31?"".concat(Math.ceil(t/24)," days ago"):"a long time ago"},y=function(e){var a=e.dialogs.map((function(e){var a=b(e.lastDialogActivityDate),t=b(e.lastUserActivityDate);return m.a.createElement(f,{key:e.id,id:e.id,name:e.userName,date:a,userActivityDate:t,avatar:e.photos.small})}));return m.a.createElement("div",{className:N.a.items},a)},D=t(324),S=t.n(D),I=function(e){return m.a.createElement("div",{className:S.a.message},m.a.createElement("div",{className:S.a.content},m.a.createElement("div",{className:S.a.info},m.a.createElement("span",{className:S.a.name},e.login),m.a.createElement("span",{className:S.a.date},e.date)),m.a.createElement("p",null,e.message)),m.a.createElement("img",{className:S.a.avatar,src:e.avatar||h.a,alt:"avatar"}))},j=t(325),O=t.n(j),k=t(326),x=t.n(k),Y=function(e){return m.a.createElement("div",{className:x.a.message},m.a.createElement("img",{className:x.a.avatar,src:"https://img.novosti-n.org/upload/ukraine/131388.jpg",alt:"avatar"}),m.a.createElement("div",{className:x.a.content},m.a.createElement("div",{className:x.a.info},m.a.createElement("span",{className:x.a.name},e.name),m.a.createElement("span",{className:x.a.date},e.date)),m.a.createElement("p",null,e.message)))},w=t(327),A=t.n(w),F=t(99),C=t(100),T=t(19),q=t(50),H=Object(q.b)(50),P=Object(C.a)({form:"message"})((function(e){var a=e.handleSubmit;return m.a.createElement("form",{onSubmit:a},m.a.createElement(F.a,{castomClassName:"top",component:T.b,validate:[H],placeholder:"Type your message...",name:"messageText"}),m.a.createElement("button",null,"Send"))})),z=function(e){var a=e.addMessage,t=e.userId,s=e.avatar,n=e.login;return m.a.createElement("div",{className:A.a.input},m.a.createElement("img",{src:s||h.a,alt:"avatar"}),m.a.createElement(P,{onSubmit:function(e){a(e.messageText,t,n)}}))},G=function(e){var a=e.messages,t=e.avatar,s=e.addMessage,n=e.userId,r=e.login,c=a.map((function(e){return e.userId==n?m.a.createElement(I,{key:e.id,date:e.date,message:e.message,avatar:t,login:r}):m.a.createElement(Y,{key:e.id,date:e.date,message:e.message,name:e.user,avatar:e.avatar})}));return m.a.createElement("div",null,m.a.createElement("div",{className:O.a.messages},a.length?c:m.a.createElement("h1",null,"Send first message")),m.a.createElement(z,{login:r,avatar:t,userId:n,addMessage:s}))},J=t(109),K=function(e){var a=e.dialogs,t=Object(s.a)(e,["dialogs"]);return m.a.createElement("div",{className:d.a.dialogs},m.a.createElement(J.a,{placeholder:"Search dialog"}),m.a.createElement("div",{className:d.a.container},m.a.createElement(y,{dialogs:a}),m.a.createElement(G,t)))},U=t(12),B=t(141),R=t(8),V=t(9),Z=t(32),L=t(29),Q=function(e){function a(){return Object(n.a)(this,a),Object(c.a)(this,Object(i.a)(a).apply(this,arguments))}return Object(l.a)(a,e),Object(r.a)(a,[{key:"componentDidMount",value:function(){this.props.toggleIsSuccess(!1),this.props.getDialogs(),this.props.match.params.userId&&this.props.getMessages(this.props.match.params.userId)}},{key:"render",value:function(){var e=this.props,a=(e.toggleIsSuccess,Object(s.a)(e,["toggleIsSuccess"]));return!this.props.match.params.userId&&this.props.dialogs.length?m.a.createElement(Z.a,{to:"/messages/".concat(this.props.dialogs[0].id)}):this.props.isFetching?m.a.createElement(L.a,null):m.a.createElement(K,a)}}]),a}(m.a.Component);a.default=Object(R.d)(Object(U.b)((function(e){return{messages:e.dialogs.messages,dialogs:e.dialogs.dialogs,avatar:e.auth.photos.small,login:e.auth.login,userId:e.auth.userId,isFetching:e.app.isFetching}}),{addMessage:g.a,getMessages:g.d,toggleIsSuccess:V.e,getDialogs:g.c}),B.a,Z.g)(Q)}}]);
//# sourceMappingURL=3.011ea533.chunk.js.map